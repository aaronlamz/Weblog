(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[414],{41129:(e,r,t)=>{"use strict";t.d(r,{default:()=>v});var n=t(2386),o=t(7674),s=t(17952),a=t(87820),i=t(51252),l=t(93125),d=t(56424),c=t(27335),u=t(22651),m=t(15702),b=t(80530),p=t(2234),x=t(43946),h=t(68824),g=t(55017);function f(e){let{code:r,className:t=""}=e,[s,a]=(0,o.useState)(!1),i=async()=>{try{await navigator.clipboard.writeText(r),a(!0),setTimeout(()=>a(!1),2e3)}catch(e){console.error("复制失败:",e)}};return(0,n.jsx)("button",{onClick:i,className:"\n        inline-flex items-center gap-1 px-2 py-1 text-xs font-medium\n        bg-background hover:bg-primary/10 \n        border border-border hover:border-primary/50\n        rounded-md transition-all duration-200\n        text-muted-foreground hover:text-primary\n        shadow-sm hover:shadow-md\n        ".concat(t,"\n      "),"aria-label":s?"已复制":"复制代码",children:s?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.A,{className:"w-3 h-3"}),(0,n.jsx)("span",{children:"已复制"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g.A,{className:"w-3 h-3"}),(0,n.jsx)("span",{children:"复制"})]})})}let v=function(e){let{content:r}=e,t=(0,s.c3)("common"),{theme:h}=(0,x.D)(),g=(0,o.useRef)(null),[v,w]=(0,o.useState)([]),[y,j]=(0,o.useState)(""),[N,k]=(0,o.useState)(0),[C,E]=(0,o.useState)(!1),T=(0,o.useRef)(null),S=(0,o.useRef)(null),[A,z]=(0,o.useState)(!1);(0,o.useEffect)(()=>{let e=g.current;if(!e)return;let r=Array.from(e.querySelectorAll("h2, h3")),t={},n=e=>{var r;let n=e.toLowerCase().trim().replace(/[^\w\u4e00-\u9fa5\s-]/g,"").replace(/\s+/g,"-"),o=null!=(r=t[n])?r:0;return t[n]=o+1,0===o?n:"".concat(n,"-").concat(o)},o=[];for(let e of r){let r=(e.textContent||"").trim();if(!r)continue;e.id||(e.id=n(r));let t=Number(e.tagName.substring(1));(2===t||3===t)&&o.push({id:e.id,text:r,level:t}),e.style.scrollMarginTop="7rem"}w(o);let s=new IntersectionObserver(e=>{let r=e.filter(e=>e.isIntersecting).sort((e,r)=>e.target.offsetTop-r.target.offsetTop);r[0]&&j(r[0].target.id)},{rootMargin:"-20% 0px -70% 0px",threshold:[0,1]});return r.forEach(e=>s.observe(e)),()=>{s.disconnect()}},[r]),(0,o.useEffect)(()=>{let e=()=>{let e=g.current;if(!e)return;let r=e.getBoundingClientRect(),t=window.scrollY+r.top,n=Math.max(1,e.offsetHeight-window.innerHeight);k(Math.min(1,Math.max(0,(window.scrollY-t)/n))),z(window.scrollY>400)},r=()=>e();return e(),window.addEventListener("scroll",e,{passive:!0}),window.addEventListener("resize",r),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",r)}},[]);let _=e=>r=>{r.preventDefault();let t=document.getElementById(e);if(!t)return;let n=t.getBoundingClientRect().top+window.scrollY-96;window.scrollTo({top:n,behavior:"smooth"}),C&&(E(!1),setTimeout(()=>{var e;return null==(e=T.current)?void 0:e.focus()},0))};return(0,o.useEffect)(()=>{S.current&&(C?S.current.removeAttribute("inert"):S.current.setAttribute("inert",""))},[C]),(0,o.useEffect)(()=>{if(!C)return;let e=e=>{"Escape"===e.key&&(e.preventDefault(),E(!1),setTimeout(()=>{var e;return null==(e=T.current)?void 0:e.focus()},0))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[C]),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"fixed top-0 left-0 right-0 z-[60] h-0.5 bg-transparent",children:(0,n.jsx)("div",{className:"h-0.5 bg-primary transition-[width] duration-150",style:{width:"".concat(100*N,"%")}})}),(0,n.jsxs)("div",{className:"mx-auto max-w-6xl grid grid-cols-1 lg:grid-cols-[minmax(0,1fr)_260px] gap-8",children:[(0,n.jsx)("div",{children:(0,n.jsx)("div",{ref:g,className:"prose prose-gray dark:prose-invert max-w-none",children:(0,n.jsx)(d.oz,{remarkPlugins:[c.A],rehypePlugins:[u.A,[m.A,{behavior:"wrap"}]],components:{code:e=>{let{node:r,inline:t,className:o,children:s,...a}=e,i=/language-(\w+)/.exec(o||""),l=i?i[1]:"javascript",d=String(s).replace(/\n$/,"");return t||!i?(0,n.jsx)("code",{...a,children:s}):(0,n.jsxs)("div",{className:"relative my-6 rounded-lg border border-border/20 overflow-hidden shadow-sm bg-background",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 bg-muted/20 border-b border-border/20",children:[(0,n.jsx)("span",{className:"text-xs font-mono font-medium text-muted-foreground uppercase tracking-wide",children:l}),(0,n.jsx)(f,{code:d})]}),(0,n.jsx)(b.A,{language:l,style:"dark"===h?p.xJ:p.Je,customStyle:{margin:0,borderRadius:0,padding:"1rem",fontSize:"14px",lineHeight:"1.5"},codeTagProps:{style:{fontFamily:"'JetBrains Mono', 'Fira Code', 'SF Mono', Consolas, monospace"}},showLineNumbers:!0,wrapLines:!0,lineNumberStyle:{minWidth:"3em",paddingRight:"1em",fontSize:"12px"},children:d})]})}},children:r})})}),v.length>0&&(0,n.jsx)("aside",{className:"hidden lg:block","aria-label":"Table of contents",children:(0,n.jsxs)("div",{className:"sticky top-28 space-y-2 border-l pl-4 border-border/60",children:[(0,n.jsxs)("div",{className:"sticky top-0 z-10 -ml-4 pl-4 pr-2 py-1 bg-background/80 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:[(0,n.jsx)("div",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:t("onThisPage")}),(0,n.jsx)("div",{className:"h-px bg-border/60 mt-2"})]}),(0,n.jsx)("nav",{className:"flex flex-col gap-1 text-sm max-h-[calc(100vh-12rem)] overflow-y-auto pr-1",role:"navigation",children:v.map(e=>(0,n.jsxs)("a",{href:"#".concat(e.id),onClick:_(e.id),className:"relative inline-block py-1 transition-colors ".concat(3===e.level?"pl-4 text-foreground/80":"pl-0"," ").concat(y===e.id?"text-primary font-medium":"text-foreground/70 hover:text-foreground"),children:[(0,n.jsx)("span",{className:"absolute -left-4 top-0 bottom-0 w-0.5 rounded bg-primary/70 transition-opacity ".concat(y===e.id?"opacity-100":"opacity-0"),"aria-hidden":!0}),e.text]},e.id))})]})})]}),v.length>0&&(0,n.jsxs)("button",{ref:T,type:"button",className:"lg:hidden fixed bottom-20 right-4 z-50 inline-flex items-center gap-2 rounded-full px-4 py-2 bg-background/80 backdrop-blur border border-border/60 shadow-lg hover:bg-background transition-colors animate-[pulse_2s_ease-in-out_infinite]","aria-haspopup":"dialog","aria-expanded":C,"aria-controls":"mobile-toc",onClick:()=>E(!0),children:[(0,n.jsx)(a.A,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"text-sm",children:t("onThisPage")})]}),C&&(0,n.jsx)("button",{"aria-label":"Close TOC",className:"fixed inset-0 z-50 bg-background/60 backdrop-blur-sm lg:hidden",onClick:()=>{E(!1),setTimeout(()=>{var e;return null==(e=T.current)?void 0:e.focus()},0)}}),(0,n.jsxs)("div",{id:"mobile-toc",role:"dialog","aria-modal":"true",className:"lg:hidden fixed top-0 right-0 h-full w-[85%] max-w-sm z-[60] bg-background border-l border-border/60 transform transition-transform duration-200 ease-out ".concat(C?"translate-x-0":"translate-x-full"),ref:S,children:[(0,n.jsxs)("div",{className:"sticky top-0 flex items-center justify-between px-4 py-3 border-b border-border/60 bg-background/90 backdrop-blur",children:[(0,n.jsx)("div",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:t("onThisPage")}),(0,n.jsx)("button",{type:"button","aria-label":"Close",className:"rounded p-1 hover:bg-muted/50",onClick:()=>{E(!1),setTimeout(()=>{var e;return null==(e=T.current)?void 0:e.focus()},0)},children:(0,n.jsx)(i.A,{className:"h-4 w-4"})})]}),(0,n.jsx)("nav",{className:"px-4 py-3 space-y-1 overflow-y-auto h-[calc(100%-3rem)]",children:v.map(e=>(0,n.jsx)("a",{href:"#".concat(e.id),onClick:_(e.id),className:"block py-2 transition-colors ".concat(3===e.level?"pl-6 text-foreground/80":"pl-0"," ").concat(y===e.id?"text-primary font-medium":"text-foreground/80 hover:text-foreground"),children:e.text},e.id))})]}),(0,n.jsx)("button",{type:"button","aria-label":"Back to top",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"hidden lg:flex fixed bottom-8 right-6 z-40 h-10 w-10 items-center justify-center rounded-full border border-border/60 bg-background/80 backdrop-blur shadow-md transition-all ".concat(A?"opacity-100 translate-y-0":"opacity-0 translate-y-2 pointer-events-none"),children:(0,n.jsx)(l.A,{className:"h-4 w-4"})})]})}},67795:(e,r,t)=>{"use strict";t.d(r,{default:()=>a});var n=t(2386),o=t(7674);let s=(0,t(22657).default)(()=>t.e(245).then(t.bind(t,23245)),{loadableGenerated:{webpack:()=>[23245]},ssr:!1});function a(e){let{locale:r}=e,[t,a]=(0,o.useState)(!1),i=(0,o.useRef)(null);return(0,o.useEffect)(()=>{if(t)return;let e=i.current;if(!e)return;let r=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&a(!0)})},{rootMargin:"400px 0px"});return r.observe(e),()=>r.disconnect()},[t]),(0,n.jsx)("div",{ref:i,children:t?(0,n.jsx)(s,{locale:r}):(0,n.jsxs)("div",{className:"mt-16 pt-8 border-t border-border/30",children:[(0,n.jsx)("div",{className:"h-5 w-24 bg-muted/60 rounded mb-4"}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("div",{className:"h-4 w-full bg-muted/40 rounded"}),(0,n.jsx)("div",{className:"h-4 w-5/6 bg-muted/40 rounded"}),(0,n.jsx)("div",{className:"h-4 w-4/6 bg-muted/40 rounded"})]})]})})}},81723:(e,r,t)=>{Promise.resolve().then(t.bind(t,41129)),Promise.resolve().then(t.bind(t,67795))}},e=>{var r=r=>e(e.s=r);e.O(0,[952,5,508,558,358],()=>r(81723)),_N_E=e.O()}]);